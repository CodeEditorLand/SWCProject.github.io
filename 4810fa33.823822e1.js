(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{150:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return p})),r.d(t,"toc",(function(){return i})),r.d(t,"default",(function(){return u}));var n=r(3),o=r(7),s=(r(0),r(349)),a=["components"],c={title:"Changelog: swc v1.2.47",author:"DongYoon Kang",authorURL:"http://github.com/kdy1",authorFBID:0x5af8dbecdbce},p={permalink:"/blog/2021/01/31/swc-1.2.47",source:"@site/blog/2021-01-31-swc-1.2.47.md",description:"Bugfixes",date:"2021-01-31T00:00:00.000Z",tags:[],title:"Changelog: swc v1.2.47",readingTime:2.035,truncated:!1,prevItem:{title:"Changelog: swc v1.2.48",permalink:"/blog/2021/02/22/swc-1.2.48"},nextItem:{title:"Changelog: swc v1.2.46",permalink:"/blog/2021/01/23/swc-1.2.46"}},i=[{value:"Bugfixes",id:"bugfixes",children:[{value:"bundler: No more infinite loop (#1369)",id:"bundler-no-more-infinite-loop-1369",children:[]},{value:"bundler: Refinsed cjs support (#1349)",id:"bundler-refinsed-cjs-support-1349",children:[]},{value:"bundler: Support for node js builtin modules (#1349)",id:"bundler-support-for-node-js-builtin-modules-1349",children:[]},{value:"bundler: Various bugfixes (#1349, )",id:"bundler-various-bugfixes-1349-",children:[]},{value:"sourceMappingURL is respected (#1236)",id:"sourcemappingurl-is-respected-1236",children:[]},{value:"sourceMappingURL relative to input file (#1255)",id:"sourcemappingurl-relative-to-input-file-1255",children:[]},{value:"parser: Generator function with jsx enabled (#1299)",id:"parser-generator-function-with-jsx-enabled-1299",children:[]},{value:"js api: Respect <code>isModule: false</code> (#1258)",id:"js-api-respect-ismodule-false-1258",children:[]},{value:"cjs: Fix for export default-ed classes (#1213)",id:"cjs-fix-for-export-default-ed-classes-1213",children:[]},{value:"typescript: Support for type-only namespaces (#1361)",id:"typescript-support-for-type-only-namespaces-1361",children:[]}]},{value:"New features",id:"new-features",children:[{value:"bundler: Support for json modules (#1368)",id:"bundler-support-for-json-modules-1368",children:[]}]},{value:"New platform support",id:"new-platform-support",children:[{value:"windows ia32 (#1367)",id:"windows-ia32-1367",children:[]}]}],l={toc:i};function u(e){var t=e.components,r=Object(o.a)(e,a);return Object(s.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"bugfixes"},"Bugfixes"),Object(s.b)("h3",{id:"bundler-no-more-infinite-loop-1369"},"bundler: No more infinite loop (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1369"},"#1369"),")"),Object(s.b)("p",null,"This was reported by a ",Object(s.b)("a",{parentName:"p",href:"https://deno.land"},"Deno")," user at ",Object(s.b)("a",{parentName:"p",href:"https://github.com/denoland/deno/issues/8224"},"https://github.com/denoland/deno/issues/8224"),". It was hard to debug because there was no test case, but fix was simple."),Object(s.b)("h3",{id:"bundler-refinsed-cjs-support-1349"},"bundler: Refinsed cjs support (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1349"},"#1349"),")"),Object(s.b)("p",null,"You can now use ",Object(s.b)("inlineCode",{parentName:"p"},"regenerator")," with spack, the bundler for the ",Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," project."),Object(s.b)("p",null,"Previously some cjs modules are incorrectly compiled."),Object(s.b)("h3",{id:"bundler-support-for-node-js-builtin-modules-1349"},"bundler: Support for node js builtin modules (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1349"},"#1349"),")"),Object(s.b)("p",null,"The bundler now supports importing / reexporting node js builtin modules. It currently does not touch such imports / exports."),Object(s.b)("h3",{id:"bundler-various-bugfixes-1349-"},"bundler: Various bugfixes (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1349"},"#1349"),", )"),Object(s.b)("p",null,"Some more bugs are fixed."),Object(s.b)("h3",{id:"sourcemappingurl-is-respected-1236"},"sourceMappingURL is respected (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/issues/1236"},"#1236"),")"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," now respectes ",Object(s.b)("inlineCode",{parentName:"p"},"//# sourceMappingURL=")," in the input file."),Object(s.b)("h3",{id:"sourcemappingurl-relative-to-input-file-1255"},"sourceMappingURL relative to input file (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/issues/1255"},"#1255"),")"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," now resolves source maps from two location (to prevent regression).\nIt will try relative path first, and tries to resolve from root if source map isn't found."),Object(s.b)("p",null,"Second check is to preserve breaking existing tools."),Object(s.b)("h3",{id:"parser-generator-function-with-jsx-enabled-1299"},"parser: Generator function with jsx enabled (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/issues/1299"},"#1299"),")"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," can now parse code like"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"export const iteratorMapGenerator = function* <T, R>(\n  values: IterableIterator<T>,\n  execute: IteratorExecution<T, R>\n): IterableIterator<R> {};\n")),Object(s.b)("p",null,"correctly."),Object(s.b)("h3",{id:"js-api-respect-ismodule-false-1258"},"js api: Respect ",Object(s.b)("inlineCode",{parentName:"h3"},"isModule: false")," (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/issues/1258"},"#1258"),")"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," now supports parsing a file as script.\nIt would be useful if you are using non-strict mode codes."),Object(s.b)("h3",{id:"cjs-fix-for-export-default-ed-classes-1213"},"cjs: Fix for export default-ed classes (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/issues/1213"},"#1213"),")"),Object(s.b)("p",null,"Previously ",Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," miscompiled"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},'import foo from "foo";\n\nclass OK {\n  constructor() {\n    console.log(foo);\n  }\n}\n\nexport default class NotOK {\n  constructor() {\n    console.log(foo);\n  }\n}\n')),Object(s.b)("p",null,"as"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-js"},'"use strict";\nObject.defineProperty(exports, "__esModule", {\n  value: true,\n});\nexports.default = void 0;\nvar _foo = _interopRequireDefault(require("foo"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule\n    ? obj\n    : {\n        default: obj,\n      };\n}\nclass OK {\n  constructor() {\n    console.log(_foo.default);\n  }\n}\nclass NotOK {\n  constructor() {\n    console.log(foo); // <- this is wrong\n  }\n}\nexports.default = NotOK;\n')),Object(s.b)("p",null,"which is wrong because of the line commented. It's now fixed."),Object(s.b)("h3",{id:"typescript-support-for-type-only-namespaces-1361"},"typescript: Support for type-only namespaces (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1361"},"#1361"),")"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," now correctly removes the namespace ",Object(s.b)("inlineCode",{parentName:"p"},"TestClass")," from the code below."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"export class TestClass {\n  public testMethod(args: TestClass.TestArgs) {\n    return args.param1;\n  }\n}\n\ndeclare namespace TestClass {\n  export interface TestArgs {\n    param1: boolean;\n  }\n}\n")),Object(s.b)("h2",{id:"new-features"},"New features"),Object(s.b)("h3",{id:"bundler-support-for-json-modules-1368"},"bundler: Support for json modules (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1368"},"#1368"),")"),Object(s.b)("p",null,"Reported as ",Object(s.b)("a",{parentName:"p",href:"https://github.com/swc-project/swc/issues/1225"},"axios import error"),", but actually it was a bug related to importing json files."),Object(s.b)("h2",{id:"new-platform-support"},"New platform support"),Object(s.b)("h3",{id:"windows-ia32-1367"},"windows ia32 (",Object(s.b)("a",{parentName:"h3",href:"https://github.com/swc-project/swc/pull/1367"},"#1367"),")"),Object(s.b)("p",null,"Thanks to ",Object(s.b)("a",{parentName:"p",href:"https://github.com/Brooooooklyn"},"@Brooooooklyn"),", ",Object(s.b)("a",{parentName:"p",href:"https://swc.rs"},"swc")," now supports windows-ia32."))}u.isMDXComponent=!0},349:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return f}));var n=r(0),o=r.n(n);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=o.a.createContext({}),l=function(e){var t=o.a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},u=function(e){var t=l(e.components);return o.a.createElement(i.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,a=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),u=l(r),d=n,f=u["".concat(a,".").concat(d)]||u[d]||b[d]||s;return r?o.a.createElement(f,c(c({ref:t},i),{},{components:r})):o.a.createElement(f,c({ref:t},i))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,a=new Array(s);a[0]=d;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c.mdxType="string"==typeof e?e:n,a[1]=c;for(var i=2;i<s;i++)a[i]=r[i];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);