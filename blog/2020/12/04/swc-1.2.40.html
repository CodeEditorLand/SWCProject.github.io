<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Changelog: swc v1.2.40 · swc</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Bugfixes"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Changelog: swc v1.2.40 · swc"/><meta property="og:type" content="website"/><meta property="og:url" content="https://swc.rs/blog/2020/12/04/swc-1.2.40"/><meta property="og:description" content="## Bugfixes"/><meta property="og:image" content="https://swc.rs/img/swc.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://swc.rs/img/swc.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://swc.rs/blog/atom.xml" title="swc Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://swc.rs/blog/feed.xml" title="swc Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-81467907-3', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">swc</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/installation" target="_self">Docs</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://opencollective.com/swc" target="_self">Donate</a></li><li class=""><a href="https://github.com/swc-project/swc" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>All Blog Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">All Blog Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2020/12/22/swc-1.2.41">Changelog: swc v1.2.41</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2020/12/04/swc-1.2.40">Changelog: swc v1.2.40</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/11/21/swc-1.2.39">Changelog: swc v1.2.39</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/11/08/swc-1.2.38">Changelog: swc v1.2.38</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/10/29/swc-1.2.37">Changelog: swc v1.2.37</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/10/06/swc-1.2.36">Changelog: swc v1.2.36</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/10/04/swc-1.2.35">Changelog: swc v1.2.35</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/24/swc-1.2.34">Hotfix: swc v1.2.34</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/24/swc-1.2.33">ChangeLog: swc v1.2.33</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/22/swc-1.2.32">ChangeLog: swc v1.2.32</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/22/swc-1.2.31">ChangeLog: swc v1.2.31</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/18/swc-1.2.30">ChangeLog: swc v1.2.30</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/13/swc-1.2.27">ChangeLog: swc v1.2.27</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/11/swc-1.2.26">Hotfix: swc v1.2.26</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/11/swc-1.2.25">Changelog: swc v1.2.25</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/09/08/swc-1.2.23">Changelog: swc v1.2.23</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/31/swc-1.2.22">Changelog: swc v1.2.22</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/24/swc-1.2.21">Changelog: swc v1.2.21</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/15/swc-1.2.20">Changelog: swc v1.2.20</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/13/swc-1.2.19">Changelog: swc v1.2.19</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/11/swc-1.2.18">Changelog: swc v1.2.18</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/10/swc-1.2.17">Changelog: swc v1.2.17</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/10/swc-1.2.16">Changelog: swc v1.2.16</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/09/swc-1.2.15">Changelog: swc v1.2.15</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/08/swc-1.2.14">Changelog: swc v1.2.14</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/07/swc-1.2.13">Changelog: swc v1.2.13</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/06/swc-1.2.12">Changelog: swc v1.2.12</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/08/02/swc-1.2.11">swc v1.2.11: Fix for almost all typescript bugs</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/07/31/swc-1.2.10">Changelog: swc v1.2.10</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/07/26/swc-1.2.9">Changelog: swc v1.2.9</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/07/05/swc-1.2.8">Changelog: swc v1.2.8</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/07/01/swc-1.2.7">Changelog: swc v1.2.7</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/21/swc-1.2.6">Changelog: swc v1.2.6</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/19/swc-1.2.5">Changelog: swc v1.2.5</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/18/swc-1.2">v1.2: spack: Yet another asset bundler</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/13/swc-1.1.58">Changelog: swc v1.1.58</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/11/swc-1.1.57">Changelog: swc v1.1.57</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/10/swc-1.1.56">Changelog: swc v1.1.56</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/09/swc-1.1.55">Changelog: swc v1.1.55</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/06/swc-1.1.54">Changelog: swc v1.1.54</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/03/swc-1.1.53">Changelog: swc v1.1.53</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/06/02/swc-1.1.52">Changelog: swc v1.1.52</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/30/swc-1.1.51">Changelog: swc v1.1.51</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/28/swc-1.1.50">Hotfix: swc v1.1.50</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/28/swc-1.1.49">Changelog: swc v1.1.49</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/25/swc-1.1.48">Changelog: swc v1.1.48</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/22/swc-1.1.47">Changelog: swc v1.1.47</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/21/swc-1.1.46">Changelog: swc v1.1.46</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/19/swc-1.1.45">Changelog: swc v1.1.45</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/19/swc-1.1.44">Changelog: swc v1.1.44</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/16/swc-1.1.43">Changelog: swc v1.1.43</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/05/swc-1.1.42">Changelog: swc v1.1.42</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/05/swc-1.1.41">Changelog: swc v1.1.41</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/05/03/swc-1.1.40">Changelog: swc v1.1.40</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/04/10/swc-1.1.39">Changelog: swc v1.1.39</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/04/05/swc-1.1.38">Changelog: swc v1.1.38</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/28/swc-1.1.37">Changelog: swc v1.1.37</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/26/swc-1.1.36">Changelog: swc v1.1.36</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/16/roadmap-and-call-for-help">Call for help and roadmap</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/14/swc-1.1.35">Changelog: swc v1.1.35</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/10/swc-1.1.34">Changelog: swc v1.1.34</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/04/swc-1.1.32">Changelog: swc v1.1.32</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/04/swc-1.1.33">Changelog: swc v1.1.33</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/01/swc-1.1.31">Changelog: swc v1.1.31</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/29/swc-1.1.30">Changelog: swc v1.1.30</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/27/swc-1.1.29">Changelog: swc v1.1.29</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/22/swc-1.1.28">Changelog: swc v1.1.28</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/20/swc-1.1.27">Changelog: swc v1.1.27</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/19/swc-1.1.26">Changelog: swc v1.1.26</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/17/swc-1.1.25">Changelog: swc v1.1.25</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/16/why-is-swc-fast">Why is swc fast?</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/13/swc-1.1.24">Changelog: swc v1.1.24</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/13/swc-1.1.23">Changelog: swc v1.1.23 - hotfix</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/13/swc-1.1.22">Changelog: swc v1.1.22</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/13/swc-1.1.21">Changelog: swc v1.1.21</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/07/swc-1.1.20">Changelog: swc v1.1.20</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/07/swc-1.1.19">Changelog: swc v1.1.19</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/31/perf-swc-vs-babel">Performance comparison of swc and babel</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/30/swc-1.1.17">Changelog: swc v1.1.17</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/26/swc-1.1.16">Changelog: swc v1.1.16</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/24/swc-1.1.15">Changelog: swc v1.1.15</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/23/swc-1.1.14">Changelog: swc v1.1.14</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/17/swc-1.1.13">Changelog: swc v1.1.13</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/08/swc-1.1.12">Changelog: swc v1.1.12</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/04/pmutil">Introducing pmutil</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/02/swc-1.1.11">Changelog: swc v1.1.11</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/29/swc-1.1.10">Changelog: swc v1.1.10: preset-env</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/25/swc-1.1.9">Changelog: swc v1.1.9</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/24/swc-1.1.8">Changelog: swc v1.1.8</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/21/swc-1.1.7">Changelog: swc v1.1.7</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/14/swc-1.1.6">Changelog: swc v1.1.6</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/11/swc-1.1.5">Changelog: swc v1.1.5</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/09/swc-1.1.4">Changelog: swc v1.1.4</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/04/swc-1.1.3">Changelog: swc v1.1.3</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/02/swc-1.1.2">Changelog: swc v1.1.2</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/01/swc-1.1.1">Changelog: swc v1.1.1</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/11/30/announcing-swc-1.1.0">Announcing swc v1.1.0</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/02/08/Introducing-swc-1.0">Introducing swc 1.0</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2020/12/04/swc-1.2.40">Changelog: swc v1.2.40</a></h1><p class="post-meta">December 4, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="http://github.com/kdy1" target="_blank" rel="noreferrer noopener">DongYoon Kang</a></p><div class="authorPhoto"><a href="http://github.com/kdy1" target="_blank" rel="noreferrer noopener"><img src="https://graph.facebook.com/100024888122318/picture/?height=200&amp;width=200" alt="DongYoon Kang"/></a></div></div></header><div><span><h2><a class="anchor" aria-hidden="true" id="bugfixes"></a><a href="#bugfixes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bugfixes</h2>
<h2><a class="anchor" aria-hidden="true" id="designtype-for-typescript-enums-1248httpsgithubcomswc-projectswcpull1248"></a><a href="#designtype-for-typescript-enums-1248httpsgithubcomswc-projectswcpull1248" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>design;type</code> for typescript enums (<a href="https://github.com/swc-project/swc/pull/1248">#1248</a>)</h2>
<p>Decorator metadata can be used to create very convenient tools. <a href="https://swc.rs">swc</a> now supports it more correctly.</p>
<p>For example, the code below works with <a href="https://swc.rs">swc</a><code>@1.2.40+</code>.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">enum</span> MyEnum {
  x = <span class="hljs-string">"xxx"</span>,
  y = <span class="hljs-string">"yyy"</span>,
}

<span class="hljs-keyword">class</span> Xpto {
  <span class="hljs-meta">@Decorator</span>()
  value!: MyEnum;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Decorator</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>{};
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="regenerator-ternary-with-await-1228httpsgithubcomswc-projectswcpull1228"></a><a href="#regenerator-ternary-with-await-1228httpsgithubcomswc-projectswcpull1228" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>regenerator: ternary with await (<a href="https://github.com/swc-project/swc/pull/1228">#1228</a>)</h2>
<p>Previously, <a href="https://swc.rs">swc</a> miscompiled the code below because <code>regenerator</code> had a bug.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">const</span> source = <span class="hljs-built_in">Math</span>.random() &lt; <span class="hljs-number">2</span> ? <span class="hljs-string">"matilda"</span> : <span class="hljs-string">"fred"</span>;
<span class="hljs-keyword">const</span> details = {
  _id: <span class="hljs-string">"1"</span>,
};
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">path</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`success:<span class="hljs-subst">${path}</span>`</span>;
}

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> obj =
    source === <span class="hljs-string">"matilda"</span>
      ? details
      : <span class="hljs-keyword">await</span> request(<span class="hljs-string">`/<span class="hljs-subst">${details._id}</span>?source=<span class="hljs-subst">${source}</span>`</span>);

  <span class="hljs-built_in">console</span>.log({ obj });
})();
</code></pre>
<p>I tried hard to mimic its logic as much as possible, but original codebase depends on dynamic nature of javascript and requires shared <code>&amp;mut</code>, so logic differs even if it's a port.</p>
<p>Anyway, the code above works properly with <a href="https://swc.rs">swc</a><code>@1.2.40</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-circular-imports-in-wrapped-module-1234httpsgithubcomswc-projectswcpull1234"></a><a href="#bundler-circular-imports-in-wrapped-module-1234httpsgithubcomswc-projectswcpull1234" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: Circular imports in wrapped module (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"https://deno.land/std@0.67.0/path/mod.ts"</span>;
<span class="hljs-keyword">const</span> { a, ...rest } = { a: <span class="hljs-number">3</span>, b: <span class="hljs-string">"bar"</span> };
<span class="hljs-built_in">console</span>.log(a, rest, path);
</code></pre>
<p>Previously the <a href="https://swc.rs">swc</a>-based bundlers (<code>deno bundle</code> and <code>spack</code>) had a bug which occurs</p>
<ul>
<li>Module <code>path</code> is loaded as a wrapped module.</li>
<li><code>https://deno.land/std@0.67.0/path/mod.ts</code> has circular imports internally.</li>
</ul>
<p>This is now fixed and such code works well.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-export--as-alias-1234httpsgithubcomswc-projectswcpull1234"></a><a href="#bundler-export--as-alias-1234httpsgithubcomswc-projectswcpull1234" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: export * as alias (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</h2>
<p>I got the bug report from <a href="https://deno.land">deno</a> issue tracker, and fixed it by preserving export info.</p>
<p>See: <a href="https://github.com/denoland/deno/issues/8481">https://github.com/denoland/deno/issues/8481</a></p>
<h2><a class="anchor" aria-hidden="true" id="bundler-fix-deglobbing-logic-1234httpsgithubcomswc-projectswcpull1234"></a><a href="#bundler-fix-deglobbing-logic-1234httpsgithubcomswc-projectswcpull1234" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: fix deglobbing logic (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</h2>
<p>Previously, deglobbing logic was to aggressive so that it replaces <code>log.handlers.FileHandler</code> into <code>FileHandler</code>.</p>
<p>It was because previous logic only checked the originating module. This is fixed by comparing symbols.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> log <span class="hljs-keyword">from</span> <span class="hljs-string">"https://deno.land/std/log/mod.ts"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myCLI</span>(<span class="hljs-params"></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">void</span>&gt; </span>{
  <span class="hljs-keyword">await</span> log.setup({
    handlers: {
      file: <span class="hljs-keyword">new</span> log.handlers.FileHandler(<span class="hljs-string">"DEBUG"</span>, {
        filename: <span class="hljs-string">"my.log"</span>,
      }),
      <span class="hljs-built_in">console</span>: <span class="hljs-keyword">new</span> log.handlers.ConsoleHandler(<span class="hljs-string">"INFO"</span>),
    },
    loggers: {
      <span class="hljs-keyword">default</span>: {
        level: <span class="hljs-string">"DEBUG"</span>,
        handlers: [<span class="hljs-string">"console"</span>, <span class="hljs-string">"file"</span>],
      },
    },
  });

  log.info(<span class="hljs-string">"Ok!"</span>);
}

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.meta.main) {
  myCLI();
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="codegen-unicode-escape-sequnces-1242httpsgithubcomswc-projectswcpull1242"></a><a href="#codegen-unicode-escape-sequnces-1242httpsgithubcomswc-projectswcpull1242" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>codegen: unicode escape sequnces (<a href="https://github.com/swc-project/swc/pull/1242">#1242</a>)</h2>
<p>There was a bug which ignores the value part in unicode escapes while printing result code.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-importing-a-module-multiple-time-1242httpsgithubcomswc-projectswcpull1242"></a><a href="#bundler-importing-a-module-multiple-time-1242httpsgithubcomswc-projectswcpull1242" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: importing a module multiple time (<a href="https://github.com/swc-project/swc/pull/1242">#1242</a>)</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> Head <span class="hljs-keyword">from</span> <span class="hljs-string">"https://deno.land/x/aleph/head.ts"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Head2 <span class="hljs-keyword">from</span> <span class="hljs-string">"https://deno.land/x/aleph/head.ts"</span>;
<span class="hljs-built_in">console</span>.log(Head, Head2);
</code></pre>
<p>I was a bit curious about the usecase, but I fixed it to be spec-compilant and it works well.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-export-default-in-reexport-1245httpsgithubcomswc-projectswcpull1245"></a><a href="#bundler-export-default-in-reexport-1245httpsgithubcomswc-projectswcpull1245" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: export default in reexport (<a href="https://github.com/swc-project/swc/pull/1245">#1245</a>)</h2>
<p>Previously the bundler broke code below,</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> c <span class="hljs-keyword">from</span> <span class="hljs-string">"https://deno.land/x/case@v2.1.0/mod.ts"</span>;
<span class="hljs-keyword">const</span> s = <span class="hljs-string">"one FINE day"</span>;
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"camel:"</span>, c.camelCase(s));
</code></pre>
<p>because <code>https://deno.land/x/case@v2.1.0/mod.ts</code> is defined as</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> camelCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./camelCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> constantCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./constantCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> dotCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./dotCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> headerCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./headerCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> lowerCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./lowerCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> lowerFirstCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./lowerFirstCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> normalCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./normalCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> paramCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./paramCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> pascalCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./pascalCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> pathCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./pathCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> sentenceCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./sentenceCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> snakeCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./snakeCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> swapCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./swapCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> titleCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./titleCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> upperCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./upperCase.ts"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> upperFirstCase } <span class="hljs-keyword">from</span> <span class="hljs-string">"./upperFirstCase.ts"</span>;
</code></pre>
<p>The bundler can now handle those kinds of reexports properly.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-export-specifiers-without-alias-1246httpsgithubcomswc-projectswcpull1246"></a><a href="#bundler-export-specifiers-without-alias-1246httpsgithubcomswc-projectswcpull1246" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: export specifiers without alias (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</h2>
<p>Reported with <a href="https://github.com/denoland/deno/issues/8573">https://github.com/denoland/deno/issues/8573</a></p>
<p>The bundler didn't handled it because while checking for reexports, the bundler modifies ast so that reexport specifier without alias does not exist. But in some circumstances, the bundler injects export specifiers without alias to maintain semantic of a module.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-improve-sorting-1246httpsgithubcomswc-projectswcpull1246"></a><a href="#bundler-improve-sorting-1246httpsgithubcomswc-projectswcpull1246" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: improve sorting (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</h2>
<p>Reported with <a href="https://github.com/denoland/deno/issues/8574">https://github.com/denoland/deno/issues/8574</a></p>
<p>The bug was that, the code below was not treated as an initializer of <code>globalContext</code>.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">"undefined"</span>) {
  globalContext = <span class="hljs-built_in">window</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">"undefined"</span>) {
  globalContext = self;
} <span class="hljs-keyword">else</span> {
  globalContext = {};
}
</code></pre>
<p>The fix was trivial as there were already utilities to detect initialization.</p>
<h2><a class="anchor" aria-hidden="true" id="bundler-top-level-await-flattening-1246httpsgithubcomswc-projectswcpull1246"></a><a href="#bundler-top-level-await-flattening-1246httpsgithubcomswc-projectswcpull1246" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>bundler: top-level-await flattening (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</h2>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { log } <span class="hljs-keyword">from</span> <span class="hljs-string">"./deps.ts"</span>;
<span class="hljs-keyword">await</span> log.setup({});
</code></pre>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// deps.ts</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">as</span> log <span class="hljs-keyword">from</span> <span class="hljs-string">"./log.ts"</span>;
</code></pre>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// log.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{}
<span class="hljs-keyword">await</span> setup();
</code></pre>
<p>This resulted in a bug because the bundler assumed wrapped module is not async.</p>
<p>At first glance, it seems hard to fix, but there's a simple trick.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">const</span> log_ts = <span class="hljs-keyword">await</span>(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{}
  <span class="hljs-keyword">await</span> setup();
})();
</code></pre>
<p>This fixes the issue.</p>
<h2><a class="anchor" aria-hidden="true" id="codegen-multiline-jsx-texts-1241httpsgithubcomswc-projectswcpull1241"></a><a href="#codegen-multiline-jsx-texts-1241httpsgithubcomswc-projectswcpull1241" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>codegen: multiline jsx texts (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</h2>
<p>Affected code looks like</p>
<pre><code class="hljs css language-ts">function Component() {
    return React.createElement("div", {
        name: "A
    BB"
    });
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="async_to_generator-async-method-1241httpsgithubcomswc-projectswcpull1241"></a><a href="#async_to_generator-async-method-1241httpsgithubcomswc-projectswcpull1241" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>async_to_generator: async method (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> Service {
  <span class="hljs-keyword">async</span> is(a: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">return</span> a.toUpperCase() === a;
  }
}
</code></pre>
<p>should be</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> Service {
  is(a) {
    <span class="hljs-keyword">return</span> _asyncToGenerator(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve();
      <span class="hljs-keyword">return</span> a.toUpperCase() === a;
    })();
  }
}
</code></pre>
<p>but it was transpiled as</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> Service {
  is(a) {
    <span class="hljs-keyword">return</span> _asyncToGenerator(<span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params">a</span>) </span>{
      <span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.resolve();
      <span class="hljs-keyword">return</span> a.toUpperCase() === a;
    })();
  }
}
</code></pre>
<p>which has wrong <code>a</code> in the parameter. This is fixed by simply removing all parameters.</p>
<h2><a class="anchor" aria-hidden="true" id="regenerator-no-useless-statements-1241httpsgithubcomswc-projectswcpull1241"></a><a href="#regenerator-no-useless-statements-1241httpsgithubcomswc-projectswcpull1241" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>regenerator: no useless statements (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</h2>
<p>I made a mistake while proting <code>regenerator</code> pass. The mistake resulted in bit larger code, and very hard time debugging.</p>
<p>Now I find the cause of case number being not same as one of regenerator, so future bugs will be easily fixed.</p>
<h2><a class="anchor" aria-hidden="true" id="regenerator-track-finally-properly-1241httpsgithubcomswc-projectswcpull1241"></a><a href="#regenerator-track-finally-properly-1241httpsgithubcomswc-projectswcpull1241" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>regenerator: track finally properly (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</h2>
<p>Again, <code>regenerator</code> pass depends on shared mutable state hardly, and I made mistake while porting it.
Fixing it required some dirty code because we have to modify a value stored in a list after inserting it, but it's in managable range.</p>
<hr>
</span></div></div><div class="blogSocialSection"><div class="blogSocialSectionItem"><div class="fb-like" data-href="https://swc.rs/blog/2020/12/04/swc-1.2.40" data-layout="standard" data-share="true" data-width="225" data-show-faces="false"></div></div><div class="blogSocialSectionItem"><div class="fb-comments" data-href="https://swc.rs/blog/2020/12/04/swc-1.2.40" data-width="100%" data-numposts="5" data-order-by="time"></div></div></div></div><div class="blog-recent"><a class="button" href="/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#bugfixes">Bugfixes</a></li><li><a href="#designtype-for-typescript-enums-1248httpsgithubcomswc-projectswcpull1248"><code>design;type</code> for typescript enums (<a href="https://github.com/swc-project/swc/pull/1248">#1248</a>)</a></li><li><a href="#regenerator-ternary-with-await-1228httpsgithubcomswc-projectswcpull1228">regenerator: ternary with await (<a href="https://github.com/swc-project/swc/pull/1228">#1228</a>)</a></li><li><a href="#bundler-circular-imports-in-wrapped-module-1234httpsgithubcomswc-projectswcpull1234">bundler: Circular imports in wrapped module (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</a></li><li><a href="#bundler-export--as-alias-1234httpsgithubcomswc-projectswcpull1234">bundler: export * as alias (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</a></li><li><a href="#bundler-fix-deglobbing-logic-1234httpsgithubcomswc-projectswcpull1234">bundler: fix deglobbing logic (<a href="https://github.com/swc-project/swc/pull/1234">#1234</a>)</a></li><li><a href="#codegen-unicode-escape-sequnces-1242httpsgithubcomswc-projectswcpull1242">codegen: unicode escape sequnces (<a href="https://github.com/swc-project/swc/pull/1242">#1242</a>)</a></li><li><a href="#bundler-importing-a-module-multiple-time-1242httpsgithubcomswc-projectswcpull1242">bundler: importing a module multiple time (<a href="https://github.com/swc-project/swc/pull/1242">#1242</a>)</a></li><li><a href="#bundler-export-default-in-reexport-1245httpsgithubcomswc-projectswcpull1245">bundler: export default in reexport (<a href="https://github.com/swc-project/swc/pull/1245">#1245</a>)</a></li><li><a href="#bundler-export-specifiers-without-alias-1246httpsgithubcomswc-projectswcpull1246">bundler: export specifiers without alias (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</a></li><li><a href="#bundler-improve-sorting-1246httpsgithubcomswc-projectswcpull1246">bundler: improve sorting (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</a></li><li><a href="#bundler-top-level-await-flattening-1246httpsgithubcomswc-projectswcpull1246">bundler: top-level-await flattening (<a href="https://github.com/swc-project/swc/pull/1246">#1246</a>)</a></li><li><a href="#codegen-multiline-jsx-texts-1241httpsgithubcomswc-projectswcpull1241">codegen: multiline jsx texts (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</a></li><li><a href="#async_to_generator-async-method-1241httpsgithubcomswc-projectswcpull1241">async_to_generator: async method (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</a></li><li><a href="#regenerator-no-useless-statements-1241httpsgithubcomswc-projectswcpull1241">regenerator: no useless statements (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</a></li><li><a href="#regenerator-track-finally-properly-1241httpsgithubcomswc-projectswcpull1241">regenerator: track finally properly (<a href="https://github.com/swc-project/swc/pull/1241">#1241</a>)</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="https://raw.githubusercontent.com/swc-project/logo/master/swc.png" alt="swc" width="66"/></a><div><h5>Docs</h5><a href="/docs/installation.html">Installation</a><a href="/docs/configuring-swc.html">Configuring swc</a><a href="/docs/usage-swc-cli.html">Usage</a><a href="/docs/migrating-from-babel-core.html">Migration</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/swc-compiler" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://swc-slackin.herokuapp.com/">Slackin for swc</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/swc-project/swc">GitHub</a><a class="github-button" href="https://github.com/swc-project/swc" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 The swc project developers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.fbAsyncInit = function() {FB.init({appId:'3577925395580880',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));
                </script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5b6acdf7dc8baaa86317236bb5e2bb9e',
                indexName: 'swc-project',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>